# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆå›³

```
zuora-event-handler/
â”œâ”€â”€ ğŸ“‹ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ template.yaml          # SAMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (Runtime: java21)
â”‚   â”œâ”€â”€ samconfig.toml         # SAMè¨­å®š
â”‚   â””â”€â”€ env-vars.json          # ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç”¨ç’°å¢ƒå¤‰æ•°
â”‚
â”œâ”€â”€ ğŸ”§ ä¾¿åˆ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (Windows)
â”‚   â”œâ”€â”€ check-versions.bat     # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
â”‚   â”œâ”€â”€ build-commands.bat     # ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰é›†
â”‚   â”œâ”€â”€ quick-build.bat        # é«˜é€Ÿãƒ“ãƒ«ãƒ‰ (Gradle â†’ SAM)
â”‚   â”œâ”€â”€ test-commands.bat      # ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰é›†
â”‚   â”œâ”€â”€ run-local-java.bat     # ç›´æ¥Javaå®Ÿè¡Œ
â”‚   â””â”€â”€ run-sam-local.bat      # sam local invoke
â”‚
â”œâ”€â”€ ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ README.md              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»ä½¿ç”¨æ–¹æ³•
â”‚   â”œâ”€â”€ TECHNICAL_NOTES.md     # æŠ€è¡“è©³ç´°ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”‚   â””â”€â”€ ä½œæ¥­ç”¨ãƒ¡ãƒ¢.md          # é–‹ç™ºãƒ¡ãƒ¢
â”‚
â”œâ”€â”€ ğŸ“¦ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ event.json         # Lambdaå®Ÿè¡Œç”¨ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ â˜ï¸ Lambdaé–¢æ•°ã‚³ãƒ¼ãƒ‰
â”‚   â””â”€â”€ ZuoraEventHandler/
â”‚       â”œâ”€â”€ build.gradle       # Gradleè¨­å®š
â”‚       â”œâ”€â”€ gradlew.bat       # Gradleãƒ©ãƒƒãƒ‘ãƒ¼
â”‚       â”‚
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ main/java/com/fujifilm/fb/spf/subscription/zuora/complement/
â”‚           â”‚   â”œâ”€â”€ ZuoraEventHandlerApp.java    # Lambda entrypoint
â”‚           â”‚   â”œâ”€â”€ config/
â”‚           â”‚   â”‚   â”œâ”€â”€ AppComponent.java        # Dagger root component
â”‚           â”‚   â”‚   â””â”€â”€ SslModule.java          # SSLè¨­å®šmodule
â”‚           â”‚   â””â”€â”€ ssl/
â”‚           â”‚       â””â”€â”€ SslConfig.java          # SSLè¨¼æ˜æ›¸è¨­å®š
â”‚           â”‚
â”‚           â”œâ”€â”€ test/java/     # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚           â””â”€â”€ resources/
â”‚               â””â”€â”€ log4j2.xml # ãƒ­ã‚°è¨­å®š
â”‚
â””â”€â”€ ğŸ”¨ ãƒ“ãƒ«ãƒ‰æˆæœç‰© (.gitignoreã•ã‚Œã‚‹)
    â”œâ”€â”€ .aws-sam/
    â”‚   â””â”€â”€ build/             # sam buildã®çµæœ
    â””â”€â”€ ZuoraEventHandler/
        â”œâ”€â”€ build/             # Gradle buildã®çµæœ
        â””â”€â”€ bin/               # ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«çµæœ
```

## Javaå®Ÿè¡Œãƒ•ãƒ­ãƒ¼å›³

```
é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º: sam build
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Windows PC (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Local JDK (Java 21.0.7 Corretto)              â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Gradle Compile                            â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Dependency Resolution                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€ JAR Packaging                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â†“                             â”‚
â”‚  ğŸ“¦ .aws-sam/build/ZuoraEventHandler/               â”‚
â”‚     â”œâ”€â”€ ZuoraEventHandler.jar                      â”‚
â”‚     â”œâ”€â”€ lib/ (dependencies)                        â”‚
â”‚     â””â”€â”€ log4j2.xml                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ãƒ†ã‚¹ãƒˆãƒ•ã‚§ãƒ¼ã‚º: sam local invoke
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker Container (Lambda Simulation)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker Lambda Java (21.0.7 Corretto)          â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Lambda Runtime API                        â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ“¦ Mount: .aws-sam/build/                 â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸŒ env-vars.json                          â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ğŸš€ handleRequest() execution              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â†“                             â”‚
â”‚  ğŸ“Š Lambda Response + CloudWatch Logs              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœ¬ç•ªãƒ•ã‚§ãƒ¼ã‚º: AWS Lambda
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS Cloud (Production)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  AWS Lambda Runtime (Java 21)                  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ Managed JVM                               â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ AWS Secrets Manager                       â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ DynamoDB Integration                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ğŸŒ Real Zuora API Calls                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â†“                             â”‚
â”‚  ğŸ“ˆ CloudWatch Metrics & Logs                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ä¾å­˜é–¢ä¿‚å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Application Layer                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ZuoraEventHandlerApp.java                      â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ @Inject SslConfig                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ AWS Lambda Handler                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€ Zuora API Client                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Framework Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Dagger 2 DI     â”‚  â”‚  Log4j2 Logging  â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€ @Component  â”‚  â”‚  â”œâ”€â”€ JSON Format â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€ @Module     â”‚  â”‚  â””â”€â”€ CloudWatch  â”‚         â”‚
â”‚  â”‚  â””â”€â”€ @Provides   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Integration Layer                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  AWS SDK v2  â”‚ â”‚  Zuora SDK   â”‚ â”‚  SSL Config  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ DynamoDBâ”‚ â”‚  â”œâ”€â”€ OAuth2  â”‚ â”‚  â”œâ”€â”€ Trust   â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ SSM     â”‚ â”‚  â”œâ”€â”€ REST APIâ”‚ â”‚  â”‚    All     â”‚  â”‚
â”‚  â”‚  â””â”€â”€ Secrets â”‚ â”‚  â””â”€â”€ JSON    â”‚ â”‚  â””â”€â”€ Local   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Runtime Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Java 21         â”‚  â”‚  AWS Lambda      â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€ Corretto    â”‚  â”‚  â”œâ”€â”€ Runtime API â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€ GraalVM     â”‚  â”‚  â”œâ”€â”€ Event Loop  â”‚         â”‚
â”‚  â”‚  â””â”€â”€ Hotspot     â”‚  â”‚  â””â”€â”€ Context     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
